import"./options.1bd2caf9.js";var e=globalThis,t={},a={},r=e.parcelRequire88c7;null==r&&((r=function(e){if(e in t)return t[e].exports;if(e in a){var r=a[e];delete a[e];var i={id:e,exports:{}};return t[e]=i,r.call(i.exports,i,i.exports),i.exports}var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){a[e]=t},e.parcelRequire88c7=r),r.register;var i=r("klb57"),n=r("3tltx"),o=r("bi7XK");let s=document.getElementById("webcam"),c=document.getElementById("processing-canvas"),d=c.getContext("2d"),l=null,u=null;async function g(){if(l)return;await i.setBackend("webgl"),await i.ready();let e=n.SupportedModels.MediaPipeHands;l=await n.createDetector(e,{runtime:"tfjs",modelType:"lite"})}async function p(){if(!u)try{await g();let e=await navigator.mediaDevices.getUserMedia({video:!0});u=e,s.srcObject=e,s.onloadedmetadata=()=>{c.width=s.videoWidth,c.height=s.videoHeight},await s.play(),m()}catch(e){console.error("Error starting camera in offscreen:",e)}}async function m(){if(!u?.active||!l)return;d.drawImage(s,0,0,c.width,c.height);let e=await (0,o.getFilteredHands)(l,c),t=e.length>0?e[0].keypoints:null;chrome.runtime.sendMessage({type:"keypoints",keypoints:t}),setTimeout(m,17)}chrome.runtime.onMessage.addListener(async e=>{"offscreen"===e.target&&"start-camera"===e.type&&await p()});
//# sourceMappingURL=offscreen.efc5fe27.js.map
